function Delaunay(e){return this.triangulate(e)}Delaunay.prototype.dedup=function(e){var n,t,r,l,i,a=e.length;e:for(;a;)for(t=e[--a],n=e[--a],r=a;r;)if(i=e[--r],l=e[--r],n===l&&t===i||n===i&&t===l){e.splice(a,2),e.splice(r,2),a-=2;continue e}},Delaunay.prototype.triangulate=function(e){if(e.length<3)return[];e.sort(function(e,n){return n.x-e.x});for(var n=e.length-1,t=e[n].x,r=e[0].x,l=e[n].y,i=l;n--;)e[n].y<l&&(l=e[n].y),e[n].y>i&&(i=e[n].y);var a,u,o,p=r-t,s=i-l,y=p>s?p:s,g=.5*(r+t),h=.5*(i+l),c=[new Triangle({x:g-20*y,y:h-y,__sentinel:!0},{x:g,y:h+20*y,__sentinel:!0},{x:g+20*y,y:h-y,__sentinel:!0})],f=[],_=[];for(n=e.length;n--;){for(_.length=0,a=c.length;a--;)p=e[n].x-c[a].x,p>0&&p*p>c[a].r?(f.push(c[a]),c.splice(a,1)):(s=e[n].y-c[a].y,p*p+s*s>c[a].r||(_.push(c[a].a,c[a].b,c[a].b,c[a].c,c[a].c,c[a].a),c.splice(a,1)));for(this.dedup(_),a=_.length;a;)o=_[--a],u=_[--a],c.push(new Triangle(u,o,e[n]))}for(Array.prototype.push.apply(f,c),n=f.length;n--;)(f[n].a.__sentinel||f[n].b.__sentinel||f[n].c.__sentinel)&&f.splice(n,1);return this.getTriangles(f)},Delaunay.prototype.getTriangles=function(e){for(var n=[],t=e.length;t--;)n.push([e[t].a,e[t].b,e[t].c]);return n};